<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart - Cataract Detection</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
            margin: 0;
        }
        body {
            display: flex;
            flex-direction: column;
            background-color: #579c9c;
        }
        .content-wrapper {
            flex: 1;
            padding-bottom: 60px; /* Footer height */
        }
        footer {
            background-color: #0d6efd;
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-top: auto;
        }
        .chat-message {
            padding: 10px 15px;
            margin: 8px;
            border-radius: 18px;
            max-width: 80%;
            word-wrap: break-word;
            clear: both;
        }
        .user-message {
            background-color: #0d6efd;
            color: white;
            float: right;
            border-bottom-right-radius: 5px;
        }
        .bot-message {
            background-color: #e9ecef;
            color: black;
            float: left;
            border-bottom-left-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="content-wrapper">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #080809;">
            <div class="container-fluid">
                <a class="navbar-brand" href="index.html">Cataract Detection</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="lenses.html">Lenses</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="contact us.html">Contact</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="carts.html" style="font-weight: bold;">Cart (<span id="cartCount">0</span>)</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Cart Section -->
        <div class="container my-5" style="
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);">
            <h2 class="text-center mb-4" style="color: #000000;">Your Cart</h2>
            <table class="table table-bordered" id="cart-table" style="background-color: rgb(151, 118, 235);">
                <thead style="background-color: #71b8ff;">
                    <tr>
                        <th>Item</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Total</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <h3 style="text-align: right; margin-top: 20px;">Total Price: <span id="total-price" style="color: #0d6efd;">â‚¹0</span></h3>
            <div style="text-align: right;">
                <button class="btn btn-success" id="pay-btn" style="
                    background-color: #28a745;
                    padding: 10px 25px;
                    font-weight: bold;">Proceed to Payment</button>
            </div>
        </div>

        <!-- Payment Options Modal -->
        <div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header" style="background-color: #000000; color: white;">
                        <h5 class="modal-title" id="paymentModalLabel">Choose Payment Method</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="filter: invert(1);"></button>
                    </div>
                    <div class="modal-body" style="background-color: #f8f9fa;">
                        <a href="google pay.html">
                            <button class="btn btn-outline-primary w-100 mb-2" onclick="selectPayment('Google Pay')" style="border-color: #0d6efd; color: #0d6efd;">Google Pay</button>
                        </a>
                        <a href="PhonePe.html">
                            <button class="btn btn-outline-primary w-100 mb-2" onclick="selectPayment('PhonePe')" style="border-color: #0d6efd; color: #0d6efd;">PhonePe</button>
                        </a>
                        <a href="Paytm.html">
                            <button class="btn btn-outline-primary w-100 mb-2" onclick="selectPayment('Paytm')" style="border-color: #0d6efd; color: #0d6efd;">Paytm</button>
                        </a>
                        <a href="creditDebit.html">
                            <button class="btn btn-outline-primary w-100 mb-2" onclick="selectPayment('Credit/Debit Card')" style="border-color: #0d6efd; color: #0d6efd;">Credit/Debit Card</button>
                        </a>
                        <a href="netbanking.html">
                            <button class="btn btn-outline-primary w-100 mb-2" onclick="selectPayment('Net Banking')" style="border-color: #0d6efd; color: #0d6efd;">Net Banking</button>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Testimonials Section -->
        <section class="container my-5" style="
            background: linear-gradient(rgba(105, 228, 224, 0.9), rgba(255,255,255,0.9)), 
                        url('https://as1.ftcdn.net/jpg/07/55/32/96/1000_F_755329677_ySiKBVLbisZCoLYdNwYkWX1LPsbdc0Km.jpg');
            background-size: cover;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);">
            <h2 class="text-center mb-4" style="color: #000000;">Customer Testimonials</h2>
            <div class="testimonial" style="background-color: white; padding: 1.5rem; margin-bottom: 1rem; border-radius: 8px; border-left: 4px solid #0d6efd;">
                <p>"Great service and fast delivery!"</p>
                <p style="font-weight: bold; color: #0d6efd;">- Ishani Karmakar</p>
            </div>
            <div class="testimonial" style="background-color: white; padding: 1.5rem; margin-bottom: 1rem; border-radius: 8px; border-left: 4px solid #0d6efd;">
                <p>"Excellent quality products!"</p>
                <p style="font-weight: bold; color: #0d6efd;">- Rwitodhi Majumder</p>
            </div>
        </section>

        <!-- FAQs Section -->
        <section class="container my-5" style="
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);">
            <h2 class="text-center mb-4" style="color: #060606;">FAQs</h2>
            <div class="faq-item" style="margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid #eee;">
                <p style="font-weight: bold; color: #333;">Q: How can I track my order?</p>
                <p style="color: #555;">A: You will receive a tracking link via email after purchase.</p>
            </div>
            <div class="faq-item" style="margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid #eee;">
                <p style="font-weight: bold; color: #333;">Q: What is your return policy?</p>
                <p style="color: #555;">A: We offer a 30-day return policy for unused products.</p>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer style="background-color: #000000; color: white; text-align: center; padding: 20px 0; margin-top: auto;">
        <p style="margin: 0;">&copy; 2025 Cataract Detection. All rights reserved.</p>
    </footer>

    <!-- Chatbot Toggle Button -->
    <button class="btn btn-primary chatbot-toggle-btn" onclick="toggleChatbot()" style="
        position: fixed;
        bottom: 20px;
        right: 20px;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        font-size: 24px;
        padding: 0;
        z-index: 1000;
        background-color: #0d6efd;
        border: none;">ðŸ’¬</button>

    <!-- Chatbot Container -->
    <div class="chatbot-container" style="
        position: fixed;
        bottom: 90px;
        right: 20px;
        width: 350px;
        height: 500px;
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
        display: none;
        flex-direction: column;
        z-index: 1000;">
        <div class="chatbot-header" style="
            padding: 15px;
            background-color: #0d6efd;
            color: white;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;">
            <h5 style="margin: 0;">Cataract Assistant</h5>
            <button class="btn btn-sm btn-danger" onclick="toggleChatbot()">Close</button>
        </div>
        <div class="chatbot-body" id="chatbot-body" style="
            flex: 1;
            padding: 15px;
            overflow-y: auto;">
            <div class="bot-message chat-message">Hello! I'm your Cataract Detection assistant. How can I help you today?</div>
        </div>
        <div class="chatbot-footer" style="
            padding: 15px;
            border-top: 1px solid #ddd;">
            <input type="text" id="chatbot-input" class="form-control" placeholder="Type a message..." style="margin-bottom: 10px;" onkeypress="handleChatInputKeypress(event)">
            <button class="btn btn-primary" onclick="sendMessage()" style="width: 100%; background-color: #0d6efd; border: none;">Send</button>
        </div>
    </div>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

    <!-- Custom JS -->
    <script>
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        let totalPrice = 0;

        // Function to update the cart display
        function updateCart() {
            let tableBody = document.querySelector("#cart-table tbody");
            tableBody.innerHTML = "";
            totalPrice = 0;

            cart.forEach((item, index) => {
                let row = `<tr>
                    <td>${item.name}</td>
                    <td>â‚¹${item.price}</td>
                    <td>${item.quantity}</td>
                    <td>â‚¹${item.price * item.quantity}</td>
                    <td><button class="btn btn-danger btn-sm" onclick="removeFromCart(${index})" style="background-color: #dc3545; border: none;">Remove</button></td>
                </tr>`;
                tableBody.innerHTML += row;
                totalPrice += item.price * item.quantity;
            });

            document.getElementById("total-price").innerText = `â‚¹${totalPrice.toFixed(2)}`;
            document.getElementById("cartCount").innerText = cart.length;
        }

        // Function to remove an item from the cart
        function removeFromCart(index) {
            cart.splice(index, 1);
            localStorage.setItem("cart", JSON.stringify(cart));
            updateCart();
        }

        // Function to handle payment method selection
        function selectPayment(method) {
            alert(`You have selected ${method} as your payment method.`);
            // Simulate payment success
            localStorage.removeItem("cart");
            window.location.href = "success.html";
        }

        // Show payment options modal
        document.getElementById("pay-btn").addEventListener("click", function() {
            if (totalPrice === 0) {
                alert("Your cart is empty!");
                return;
            }
            new bootstrap.Modal(document.getElementById('paymentModal')).show();
        });

        // Initialize cart display
        updateCart();
    </script>

    <!-- Chatbot Implementation -->
    <script>
        // Chatbot responses
        const chatbotResponses = {
            "hello": "Hello! How can I assist you with cataract-related questions today?",
            "hi": "Hi there! What would you like to know about cataracts?",
            "what is cataract": "A cataract is a clouding of the eye's natural lens, which lies behind the iris and the pupil. It's the most common cause of vision loss in people over age 40.",
            "symptoms": "Common cataract symptoms include: blurred vision, difficulty with night vision, sensitivity to light, seeing 'halos' around lights, frequent changes in eyeglass prescription, and fading or yellowing of colors.",
            "treatment": "The only effective treatment for cataracts is surgery to remove the cloudy lens and replace it with an artificial lens. The procedure is safe and very common.",
            "prevention": "While cataracts can't always be prevented, you can reduce your risk by: wearing sunglasses, quitting smoking, eating foods rich in antioxidants, maintaining healthy blood sugar if diabetic, and having regular eye exams.",
            "thanks": "You're welcome! Let me know if you have any other questions about cataracts.",
            "thank you": "You're welcome! Is there anything else I can help with?",
            "default": "I'm sorry, I didn't understand that. I can help with information about cataracts, their symptoms, treatment options, and prevention. Could you please ask your question differently?"
        };

        // Toggle chatbot visibility
        function toggleChatbot() {
            const chatbot = document.querySelector('.chatbot-container');
            chatbot.style.display = chatbot.style.display === 'none' ? 'flex' : 'none';
        }

        // Send message function
        function sendMessage() {
            const input = document.getElementById('chatbot-input');
            const message = input.value.trim();
            
            if (message) {
                // Add user message to chat
                addMessage(message, 'user');
                input.value = '';
                
                // Process and respond
                setTimeout(() => {
                    const response = getBotResponse(message);
                    addMessage(response, 'bot');
                }, 500);
            }
        }

        // Handle Enter key press
        function handleChatInputKeypress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Add message to chat
        function addMessage(text, sender) {
            const chatBody = document.getElementById('chatbot-body');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}-message`;
            messageDiv.textContent = text;
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // Get bot response
        function getBotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // Check for specific keywords
            if (lowerMessage.includes('hello') || lowerMessage.includes('hi')) {
                return chatbotResponses["hello"];
            } else if (lowerMessage.includes('what is') && lowerMessage.includes('cataract')) {
                return chatbotResponses["what is cataract"];
            } else if (lowerMessage.includes('symptom')) {
                return chatbotResponses["symptoms"];
            } else if (lowerMessage.includes('treat') || lowerMessage.includes('cure')) {
                return chatbotResponses["treatment"];
            } else if (lowerMessage.includes('prevent') || lowerMessage.includes('avoid')) {
                return chatbotResponses["prevention"];
            } else if (lowerMessage.includes('thank')) {
                return chatbotResponses["thanks"];
            } else {
                return chatbotResponses["default"];
            }
        }
    </script>
</body>
</html>